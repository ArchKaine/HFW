<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Comprehensive design document for the HFW Shadow Fleet, an Anvil Aerospace subsidiary project. Details include genesis, variants, specifications, and operational doctrines." />
    <title>HFW Shadow Fleet - Comprehensive Design Document</title>
    
    <style>
    /* --- Base Styles & Full Viewport Setup --- */
    html, body {
      height: 100%;
      width: 100%; 
      margin: 0;
      padding: 0;
      overflow-y: hidden; 
      overflow-x: auto;   
      font-family: "Segoe UI", "Roboto", "Helvetica Neue", sans-serif;
      background-color: #07090D; 
      color: #f0f0f0;
      box-sizing: border-box;
    }

    *, *::before, *::after {
      box-sizing: inherit;
    }

    .spectre-post-container {
      display: grid !important;
      grid-template-areas:
        "header header header"
        "nav    content aside";
      grid-template-rows: auto 1fr;
      grid-template-columns: 320px 1280px 320px; 
      gap: 0; 
      height: 100vh; 
      
      width: 1920px; 
      margin: 0 auto;    
      
      overflow: hidden; 
      font-size: 18px; 
      line-height: 1.6; 
      background-color: #0b0e13; 
    }

    /* Grid area assignments */
    .spectre-post-container > header { grid-area: header; background-color: #1a1a1a; padding: 1rem 2rem; text-align: center; border-bottom: 1px solid #2a2a2a;}
    .spectre-post-container > nav { grid-area: nav; }
    .spectre-post-container > .container { grid-area: content; }
    .spectre-post-container > .spectre-post-aside { grid-area: aside; }

    /* Header Styling */
    .spectre-post-container header h1 {
      color: #ff4c4c;
      font-family: "Orbitron", sans-serif;
      margin: 0;
      font-size: 2.5rem;
      text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.7);
    }

    /* Sticky sidebars: nav and aside - Full Height Appearance */
    .spectre-post-container > nav,
    .spectre-post-container > .spectre-post-aside {
      position: sticky;
      top: 0;
      align-self: stretch; 
      height: 100%;     
      background-color: #111;
    }
    .spectre-post-container > .spectre-post-aside {
        border-left: 2px solid #ff4c4c; 
    }

    /* Inner scroll wrappers for nav and aside */
    .nav-scroll-wrapper,
    .aside-scroll-wrapper {
      height: 100%;
      overflow-y: auto;
      padding: 1rem;
      box-sizing: border-box;
      display: flex;
      flex-direction: column;
    }

    /* Custom scrollbar styling */
    .nav-scroll-wrapper::-webkit-scrollbar, .aside-scroll-wrapper::-webkit-scrollbar { width: 8px; }
    .nav-scroll-wrapper::-webkit-scrollbar-track, .aside-scroll-wrapper::-webkit-scrollbar-track { background: #1a1a1a; }
    .nav-scroll-wrapper::-webkit-scrollbar-thumb, .aside-scroll-wrapper::-webkit-scrollbar-thumb { background-color: #ff4c4c; border-radius: 4px; border: 1px solid #0b0e13; }
    .nav-scroll-wrapper, .aside-scroll-wrapper { scrollbar-width: thin; scrollbar-color: #ff4c4c #1a1a1a; }

    /* Nav Logo */
    .spectre-post-container > nav .nav-scroll-wrapper .nav-logo { padding: 0.5rem 1rem; text-align: center; flex-shrink: 0; }
    .spectre-post-container > nav .nav-scroll-wrapper .nav-logo-top { padding-bottom: 1rem; border-bottom: 1px solid #333; }
    .spectre-post-container > nav .nav-scroll-wrapper .nav-logo img { max-width: 100%; max-height: 150px; height: auto; display: inline-block; vertical-align: middle; }

    /* Left Navigation Button Styling */
    .spectre-post-container > nav .nav-scroll-wrapper a { display: flex; align-items: center; justify-content: flex-start; width: 100%; box-sizing: border-box; padding: 0.9rem 1.5rem; margin-bottom: 0.5rem; border: 1px solid #4a4a4a; background-color: #1f1f1f; color: #ff8c8c; text-align: left; border-radius: 6px; font-family: "Orbitron", sans-serif; text-transform: uppercase; text-decoration: none; font-size: 1rem; font-weight: normal; transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease, transform 0.2s ease-out, box-shadow 0.3s ease; flex-shrink: 0; }
    .spectre-post-container > nav .nav-scroll-wrapper a:hover { background-color: #ff4c4c; color: #0b0e13; border-color: #ff6a6a; transform: translateY(-2px); box-shadow: 0 5px 12px rgba(255, 76, 76, 0.3); }
    .spectre-post-container > nav .nav-scroll-wrapper a.nav-active { background: linear-gradient(to bottom, #ff4c4c, #d13b3b); color: #ffffff; border-color: #c02c2c; box-shadow: 0 3px 8px rgba(255, 76, 76, 0.4), inset 0 1px 3px rgba(0, 0, 0, 0.2); transform: translateY(0px); font-weight: bold; }
    .spectre-post-container > nav .nav-scroll-wrapper a.nav-active:hover { background: linear-gradient(to bottom, #ff6a6a, #ff4c4c); color: #ffffff; border-color: #d13b3b; }
    .spectre-post-container > nav .nav-scroll-wrapper a svg { fill: currentColor; width: 1em; height: 1em; margin-right: 0.8rem; vertical-align: middle; flex-shrink: 0; }

    /* Aside content: Top Logo and Headings */
    .aside-scroll-wrapper > .aside-top-logo { padding: 1rem; text-align: center; border-bottom: 1px solid #333; margin-bottom: 0; flex-shrink: 0; }
    .aside-scroll-wrapper > .aside-top-logo img { max-width: 180px; max-height: 100px; height: auto; display: inline-block; }
    .aside-scroll-wrapper > h2 { font-size: 1.1rem; color: #ff4c4c; text-transform: uppercase; margin: 0 0 0.5rem 0; padding: 1rem 0 0.5rem 0; border-bottom: 1px solid #333; flex-shrink: 0; font-family: "Orbitron", sans-serif; }

    /* UNIFIED STYLING for Right Aside Table of Contents Links */
    .spectre-post-aside ul.aside-toc { list-style: none; padding: 0; margin: 0.5rem 0; flex-grow: 1; /* min-height: 50px; /* Removed */ }
    .spectre-post-aside ul.aside-toc li { margin: 0; }
    .spectre-post-aside ul.aside-toc a { display: flex; align-items: center; justify-content: flex-start; width: 100%; box-sizing: border-box; padding: 0.9rem 1.5rem; margin-bottom: 0.5rem; border: 1px solid #4a4a4a; background-color: #1f1f1f; color: #ff8c8c; text-align: left; border-radius: 6px; font-family: "Orbitron", sans-serif; text-transform: uppercase; text-decoration: none; font-size: 1rem; font-weight: normal; transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease, transform 0.2s ease-out, box-shadow 0.3s ease; flex-shrink: 0; }
    .spectre-post-aside ul.aside-toc a:hover { background-color: #ff4c4c; color: #0b0e13; border-color: #ff6a6a; transform: translateY(-2px); box-shadow: 0 5px 12px rgba(255, 76, 76, 0.3); }
    .spectre-post-aside ul.aside-toc a.active { background: linear-gradient(to bottom, #ff4c4c, #d13b3b); color: #ffffff; border-color: #c02c2c; box-shadow: 0 3px 8px rgba(255, 76, 76, 0.4), inset 0 1px 3px rgba(0, 0, 0, 0.2); transform: translateY(0px); font-weight: bold; }
    .spectre-post-aside ul.aside-toc a.active:hover { background: linear-gradient(to bottom, #ff6a6a, #ff4c4c); color: #ffffff; border-color: #d13b3b; }
    .spectre-post-aside ul.aside-toc a svg { fill: currentColor; width: 1em; height: 1em; margin-right: 0.8rem; vertical-align: middle; flex-shrink: 0; opacity: 0.7; transition: opacity 0.3s ease; }
    .spectre-post-aside ul.aside-toc a:hover svg { opacity: 1; }
    .spectre-post-aside ul.aside-toc a.active svg { opacity: 1; color: #ffffff; }

    /* Bio Section */
    .aside-bio-section { padding: 1rem; border-top: 1px solid #333; margin-top: auto; flex-shrink: 0; color: #f0f0f0; font-size: 0.85rem; line-height: 1.5; background-color: rgba(255, 76, 76, 0.05); border-radius: 0 0 5px 5px; }
    .aside-bio-section .aside-bio-heading { font-size: 1rem !important; color: #ff8c8c !important; text-transform: uppercase; margin: 0 0 0.5rem 0 !important; padding: 0 0 0.3rem 0 !important; border-bottom: 1px dashed #444 !important; font-family: "Orbitron", sans-serif; }
    .aside-bio-content { max-height: 30vh; overflow-y: auto; padding-right: 0.5rem; scrollbar-width: thin; scrollbar-color: #ff4c4c #111; }
    .aside-bio-content::-webkit-scrollbar { width: 6px; }
    .aside-bio-content::-webkit-scrollbar-track { background: #1a1a1a; }
    .aside-bio-content::-webkit-scrollbar-thumb { background-color: #ff4c4c; border-radius: 3px; border: 1px solid #0b0e13; }

    /* Main content area */
    .spectre-post-container > .container {
      overflow-y: auto; 
      overflow-x: auto; 
      min-height: 0;    
      padding: 1.5rem 2rem; 
      box-sizing: border-box;
    }
    .spectre-post-container > .container > .section:first-child {
       margin-top: 0; 
    }

    /* --- Content Responsiveness & Overflow Management --- */
    .spectre-post-container > .container img { max-width: 100%; height: auto; display: block; }
    .spectre-post-container > .container table,
    .spectre-post-container > .container pre { max-width: 100%; overflow-x: auto; word-wrap: break-word; }
    .spectre-post-container > .container .section p,
    .spectre-post-container > .container .section li,
    .spectre-post-container > .container .section div:not(.gallery):not(.gallery-item):not([class*='tabs']):not([class*='content-wrapper']),
    .spectre-post-container > .container .section td,
    .spectre-post-container > .container .section th { word-wrap: break-word; }
    /* --- END Content Responsiveness & Overflow Management --- */

    /* General Content Styles (Headings, Paragraphs, etc.) */
    .spectre-post-container .container h2 { font-size: 1.8rem; color: #ff4c4c; text-transform: uppercase; font-family: "Orbitron", sans-serif; border-bottom: 1px solid #444; padding-bottom: 0.5rem; margin-top: 2rem; margin-bottom: 1.5rem; text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5); }
    .spectre-post-container .container h3 { font-size: 1.4rem; color: #ff8c8c; text-transform: uppercase; font-family: "Orbitron", sans-serif; border-bottom: 1px solid #333; padding-bottom: 0.3rem; margin-top: 1.5rem; margin-bottom: 1rem; text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5); }
    .spectre-post-container .container h4 { font-size: 1.2rem; color: #ffaaaa; font-family: "Orbitron", sans-serif; margin-top: 1.2rem; margin-bottom: 0.8rem; }
    .spectre-post-container .container .section > h2:first-child,
    .spectre-post-container .container .section > h3:first-child { margin-top: 0; }
    .spectre-post-container .container p { margin-bottom: 1.2rem; }
    .spectre-post-container .container .scenario-narrative { background-color: rgba(20, 20, 25, 0.5); padding: 1.5rem; border-left: 3px solid #ff4c4c; margin-bottom: 1.5rem; border-radius: 0 5px 5px 0; }
    .spectre-post-container .container .scenario-narrative p { margin-bottom: 0.8rem; text-indent: 1.5em; }
    .spectre-post-container .container .scenario-narrative p:first-of-type { text-indent: 0; }
    .spectre-post-container .container .scenario-narrative h3 + p { text-indent: 0; }
    .spectre-post-container .container .scenario-narrative h4 { font-size: 1.1rem; color: #ff6a6a; text-transform: none; border-bottom: 1px dashed #555; padding-bottom: 0.2rem; margin-top: 1rem; margin-bottom: 0.5rem; }
    .spectre-post-container .container .scenario-narrative strong { color: #ffaaaa; font-family: "Orbitron", sans-serif; }
    .spectre-post-container .container .back-to-top { font-size: 14px; color: #ffaaaa; text-decoration: underline; margin-left: 1em; text-transform: none; font-family: "Segoe UI", "Roboto", "Helvetica Neue", sans-serif; vertical-align: middle; transition: color 0.3s ease; }
    .spectre-post-container .container .back-to-top:hover { color: #fff; }
    .styled-button { cursor: pointer; font-family: "Orbitron", sans-serif; text-transform: uppercase; transition: background 0.3s, color 0.3s, border-color 0.3s, transform 0.2s ease-out, box-shadow 0.3s ease; border-radius: 6px; font-weight: bold; letter-spacing: 0.5px; display: inline-block; }
    .spectre-post-container .container .ship-family-tabs { display: flex; flex-wrap: wrap; justify-content: center; margin-bottom: 2rem; padding-bottom: 1rem; border-bottom: 3px solid #ff4c4c; }
    .spectre-post-container .container .ship-family-tabs button.family-tab { background-color: #1f1f1f; border: 1px solid #4a4a4a; color: #ff8c8c; padding: 0.9rem 1.8rem; margin: 0.5rem; font-size: 1.1rem; }
    .spectre-post-container .container .ship-family-tabs button.family-tab:hover { border-color: #ff6a6a; color: #0b0e13; background-color: #ff4c4c; transform: translateY(-2px); box-shadow: 0 5px 12px rgba(255, 76, 76, 0.3); }
    .spectre-post-container .container .ship-family-tabs button.family-tab.active-family { background: linear-gradient(to bottom, #ff4c4c, #d13b3b); color: #ffffff; border-color: #c02c2c; box-shadow: 0 3px 8px rgba(255, 76, 76, 0.4), inset 0 1px 3px rgba(0, 0, 0, 0.2); transform: translateY(0px); }
    .spectre-post-container .container .ship-family-content-wrapper { display: none; padding-top: 1rem; }
    .spectre-post-container .container .ship-family-content-wrapper.active-family-content { display: block; }
    .spectre-post-container .container .variant-tabs { display: flex; flex-wrap: wrap; justify-content: center; margin-bottom: 1rem; }
    .spectre-post-container .container .variant-tabs button { background-color: #1a1a1a; border: 1px solid #444; color: #ffaaaa; padding: 0.7rem 1.4rem; margin: 0.3rem; font-size: 1rem; }
    .spectre-post-container .container .variant-tabs button:hover { border-color: #ff4c4c; color: #0b0e13; background-color: #ff6a6a; transform: translateY(-2px); box-shadow: 0 4px 8px rgba(255, 106, 106, 0.25); }
    .spectre-post-container .container .variant-tabs button.active { background: linear-gradient(to bottom, #ff6a6a, #ff4c4c); color: #0b0e13; border-color: #ff4c4c; box-shadow: 0 2px 5px rgba(255, 76, 76, 0.3), inset 0 1px 2px rgba(0, 0, 0, 0.1); transform: translateY(0px); }
    .spectre-post-container .container .model-control-btn { background-color: #1f1f1f; border: 1px solid #383838; color: #ffaaaa; padding: 0.5rem 1rem; margin: 0.2rem; font-size: 0.85rem; font-weight: normal; letter-spacing: 0.2px; }
    .spectre-post-container .container .model-control-btn:hover { border-color: #ff4c4c; color: #fff; background-color: #2a2a2a; transform: translateY(-1px); box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3); }
    .spectre-post-container .container .variant-content { display: none; background-color: rgba(30, 30, 30, 0.6); padding: 1.5rem; border-radius: 5px; margin-top: 1rem; border: 1px solid #333; }
    .spectre-post-container .container .variant-content h3 { border-bottom: none !important; margin-top: 0 !important; margin-bottom: 1rem !important; color: #ff4c4c; font-size: 1.6rem; }
    .spectre-post-container .container .variant-content h4 { font-size: 1.3rem; color: #ff8c8c; text-transform: uppercase; font-family: "Orbitron", sans-serif; border-bottom: 1px dotted #444; padding-bottom: 0.2rem; margin-top: 1.2rem; margin-bottom: 0.8rem; }
    .spectre-post-container .container .variant-content ul { list-style: disc; padding-left: 25px; margin: 1rem 0 0 0; }
    .spectre-post-container .container .variant-content li { margin-bottom: 0.7rem; padding-left: 5px; }
    .spectre-post-container .container .variant-content.active { display: block; }
    .spectre-post-container .container .section { background-color: rgba(255, 76, 76, 0.03); padding: 2rem; border-radius: 8px; margin-top: 2.5rem; border: 1px solid #2a2a2a; transition: background-color 0.3s ease, border-color 0.3s ease; }
    .spectre-post-container .container .section:first-child { margin-top: 0; }
    .spectre-post-container .container table { width: 100%; border-collapse: collapse; margin-top: 1.5rem; margin-bottom: 1rem; table-layout: fixed; }
    .spectre-post-container .container th, .spectre-post-container .container td { padding: 0.5rem 1rem; border-bottom: 1px solid #333; color: #f0f0f0; text-align: left; vertical-align: top; }
    .spectre-post-container .container th { background-color: #1f1f1f; color: #ffaaaa; font-family: "Orbitron", sans-serif; width: 25%; font-size: 0.95rem; }
    .spectre-post-container .container td { width: 75%; }
    .spectre-post-container .container a img:hover { transform: scale(1.02); box-shadow: 0 0 15px rgba(255, 76, 76, 0.3); }
    .spectre-post-container .container .gallery { display: flex; flex-wrap: nowrap; gap: 1rem; overflow-x: auto; padding: 1rem; background-color: rgba(0, 0, 0, 0.3); border-radius: 6px; border: 1px solid #2a2a2a; justify-content: flex-start; max-width: 100%; /* min-width: 0; */ }
    .spectre-post-container .container .gallery img { width: auto; height: 426px; max-height: 426px; max-width: 640px; flex-shrink: 0; border-radius: 6px; cursor: pointer; transition: transform 0.3s ease, box-shadow 0.3s ease; border: 1px solid #444; object-fit: cover; }
    .spectre-post-container .container .caption { text-align: center; font-size: 16px; color: #ffaaaa; margin-top: 0.5rem; }
    .spectre-post-container .container details { background-color: #1a1a1a; border: 1px solid #333; border-radius: 5px; padding: 0.8rem 1.2rem; margin-top: 1rem; transition: background-color 0.3s ease; }
    .spectre-post-container .container details:hover { background-color: #222; }
    .spectre-post-container .container details summary { cursor: pointer; font-family: "Orbitron", sans-serif; color: #ffaaaa; outline: none; list-style: none; display: block; padding: 0.3rem 0; }
    .spectre-post-container .container details summary::-webkit-details-marker { display: none; }
    .spectre-post-container .container details summary h3 { margin: 0; display: inline; color: #ffaaaa; border-bottom: none; font-size: 1.2rem; }
    .spectre-post-container .container details summary::before { content: "▶"; display: inline-block; color: #ffaaaa; font-size: 1rem; margin-right: 0.8rem; transition: transform 0.2s ease; vertical-align: middle; }
    .spectre-post-container .container details[open] summary::before { transform: rotate(90deg); }
    .spectre-post-container .container details div { padding-top: 1rem; margin-top: 0.5rem; border-top: 1px solid #333; }
    .spectre-post-container .container blockquote { border-left: 4px solid #ff4c4c; margin: 1rem 0 0.5rem 0; padding: 0.5rem 1.5rem; font-style: italic; color: #ddd; background-color: rgba(255, 76, 76, 0.02); }
    .spectre-post-container .container blockquote br { display: none; }
    .spectre-post-container .container blockquote + p { margin-left: 1.5rem; font-size: 15px; color: #aaa; margin-top: 0.2rem; margin-bottom: 1.5rem; }
    .spectre-post-container .container img:not([src]),
    .spectre-post-container .container img[src=""] { display: none; }


    /* Desktop Media Query Specifics */
    @media (min-width: 992px) {
      .spectre-post-container > nav {
        border-bottom: none; 
        border-right: 2px solid #ff4c4c; 
      }
      .spectre-post-container > nav .nav-scroll-wrapper .nav-logo-top {
        margin-bottom: 1rem; 
        border-bottom: none; 
      }
    }
    </style>
    
    <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
  </head>
  <body>
    <div class="spectre-post-container" id="spectre-top">
      <header>
        <h1>HFW Shadow Fleet - Comprehensive Design Document</h1>
        <p style="color: #aaaaaa; font-size: 0.9em; margin-top: 0.2em">
          Developed by Hephaestus Forge Works (An Anvil Aerospace Subsidiary)
        </p>
      </header>

      <nav>
        <div class="nav-scroll-wrapper">
          <div class="nav-logo nav-logo-top">
            <img
              alt="Anvil Logo"
              src="https://imagizer.imageshack.com/img922/7540/a21t3g.png"
              onerror="this.onerror=null;this.src='https://placehold.co/400x200/1a1a1a/ff4c4c?text=Anvil+Logo';"
              loading="lazy" width="400" height="200"
            />
          </div>
          <a href="#spectre-concept-image"><svg fill="none" height="1em" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" stroke="currentColor" viewBox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><rect height="18" rx="2" ry="2" width="18" x="3" y="3"></rect><circle cx="9" cy="9" r="2"></circle><path d="m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"></path></svg>Gallery</a>
          <a href="#spectre-genesis"><svg fill="none" height="1em" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" stroke="currentColor" viewBox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M22 12h-6l-2 3h-4l-2-3H2"></path><path d="M5 12v6a3 3 0 0 0 3 3h8a3 3 0 0 0 3-3v-6"></path><path d="M18 3a3 3 0 0 0-3 3v6h4V6a3 3 0 0 0-3-3Z"></path><path d="M6 3a3 3 0 0 0-3 3v6h4V6a3 3 0 0 0-3-3Z"></path></svg>Genesis</a>
          <a href="#spectre-hfw-overview"><svg fill="none" height="1em" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" stroke="currentColor" viewBox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M7.9 20A9 9 0 1 0 4 16.1L2 22Z"></path></svg>HFW Overview</a>
          <a href="#spectre-founding-docs"><svg fill="none" height="1em" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" stroke="currentColor" viewBox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" x2="8" y1="13" y2="13"></line><line x1="16" x2="8" y1="17" y2="17"></line><line x1="3" x2="3.01" y1="6" y2="6"></line><line x1="3" x2="3.01" y1="12" y2="12"></line><line x1="3" x2="3.01" y1="18" y2="18"></line></svg>Founding Docs</a>
          <a href="#spectre-specs"><svg fill="none" height="1em" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" stroke="currentColor" viewBox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><line x1="8" x2="21" y1="6" y2="6"></line><line x1="8" x2="21" y1="12" y2="12"></line><line x1="8" x2="21" y1="18" y2="18"></line><line x1="3" x2="3.01" y1="6" y2="6"></line><line x1="3" x2="3.01" y1="12" y2="12"></line><line x1="3" x2="3.01" y1="18" y2="18"></line></svg>Specs</a>
          <a href="#spectre-variants"><svg fill="none" height="1em" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" stroke="currentColor" viewBox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M11 17H5a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2h6"></path><path d="M15 5h6a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-6"></path></svg>HFW Variants</a>
          <a href="#spectre-stealth-doctrine"><svg fill="none" height="1em" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" stroke="currentColor" viewBox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M11 17H5a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2h6"></path><path d="M15 5h6a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-6"></path></svg>Stealth</a>
          <a href="#spectre-scenarios"><svg fill="none" height="1em" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" stroke="currentColor" viewBox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" x2="8" y1="13" y2="13"></line><line x1="16" x2="8" y1="17" y2="17"></line><line x1="10" x2="8" y1="9" y2="9"></line></svg>Scenarios</a>
          <a href="#spectre-interior"><svg fill="none" height="1em" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" stroke="currentColor" viewBox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><rect height="18" rx="2" width="18" x="3" y="3"></rect><path d="M3 9h18"></path><path d="M9 21V9"></path></svg>Interior</a>
          <a href="#spectre-talent"><svg fill="none" height="1em" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" stroke="currentColor" viewBox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M22 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg>Talent</a>
          <a href="#spectre-comparison"><svg fill="none" height="1em" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" stroke="currentColor" viewBox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M12 3v18"></path><path d="M3.5 8.5v7"></path><path d="M20.5 12v-7"></path></svg>Comparison</a>
          <a href="#spectre-environment"><svg fill="none" height="1em" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" stroke="currentColor" viewBox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M21.2 15c.7-1.2 1-2.5.7-3.9-.6-2.4-2.4-4.2-4.8-4.8-.4-.1-.8-.2-1.2-.2-1.4-.1-2.7.1-3.9.7-1.2.6-2.2 1.4-3 2.4-.8 1-1.3 2.1-1.6 3.2C2 14.8 3.2 18 6.2 19.7c1 .6 2.1.9 3.2 1 .8.1 1.5 0 2.3-.2 1.1-.3 2.2-.8 3.1-1.5.9-.7 1.7-1.5 2.4-2.4.7-.9 1.2-2 1.5-3.1.2-.8.2-1.6 0-2.3z"></path><path d="M12 6V2"></path><path d="m4.9 4.9 2.8 2.8"></path><path d="M2 12h4"></path><path d="m4.9 19.1 2.8-2.8"></path><path d="M12 18v4"></path><path d="m19.1 19.1-2.8-2.8"></path><path d="M22 12h-4"></path><path d="m19.1 4.9-2.8 2.8"></path></svg>Environment</a>
          <a href="#spectre-testimonials"><svg fill="none" height="1em" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" stroke="currentColor" viewBox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M7.9 20A9 9 0 1 0 4 16.1L2 22Z"></path></svg>Testimonials</a>
          <a href="#revenant-acquisition"><svg class="feather feather-gitlab" fill="none" height="1em" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" stroke="currentColor" viewBox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M22.65 14.39L12 22.13 1.35 14.39a.84.84 0 0 1-.3-.94l1.22-3.78 2.44-7.59A4.28 4.28 0 0 1 8.09 2h7.82a4.28 4 0 0 1 3.06 1.64l2.44 7.59 1.22 3.78a.84.84 0 0 1-.3.94z"></path><line x1="10.53" x2="10.53" y1="20.24" y2="22.24"></line><line x1="13.47" x2="13.47" y1="20.24" y2="22.24"></line><line x1="16.41" x2="18.41" y1="18.23" y2="18.23"></line><line x1="5.59" x2="7.59" y1="18.23" y2="18.23"></line></svg>Revenant Acquisition</a>
          <a href="#spectre-conclusion"><svg fill="none" height="1em" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" stroke="currentColor" viewBox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></svg>Conclusion</a>
        </div>
      </nav>

      <div class="container">
        <div class="section" id="spectre-concept-image">
          <h2>
            Concept Gallery
            <a class="back-to-top" href="#spectre-top">[Back to Top]</a>
          </h2>
          <p>
            Visual representations illustrating the scale and design of HFW's
            covert assets.
          </p>
          <div class="gallery">
            <div class="gallery-item">
              <a href="https://imagizer.imageshack.com/img922/7601/xbT5I0.png" target="_blank" rel="noopener noreferrer">
                <img alt="Anvil Spectre in flight" src="https://imagizer.imageshack.com/img922/7601/xbT5I0.png" onerror="this.onerror=null;this.src='https://placehold.co/640x426/1a1a1a/ff4c4c?text=Spectre+Image+1';" loading="lazy" width="640" height="426"/>
              </a>
            </div>
            <div class="gallery-item">
              <a href="https://imagizer.imageshack.com/img923/6872/oFrnl2.png" target="_blank" rel="noopener noreferrer">
                <img alt="Anvil Spectre from above" src="https://imagizer.imageshack.com/img923/6872/oFrnl2.png" onerror="this.onerror=null;this.src='https://placehold.co/640x426/1a1a1a/ff4c4c?text=Spectre+Image+2';" loading="lazy" width="640" height="426"/>
              </a>
            </div>
            <div class="gallery-item">
              <a href="https://imagizer.imageshack.com/img922/2747/bWMmuY.png" target="_blank" rel="noopener noreferrer">
                <img alt="Anvil Spectre in a hangar" src="https://imagizer.imageshack.com/img922/2747/bWMmuY.png" onerror="this.onerror=null;this.src='https://placehold.co/640x426/1a1a1a/ff4c4c?text=Spectre+Image+3';" loading="lazy" width="640" height="426"/>
              </a>
            </div>
            <div class="gallery-item">
              <a href="https://imagizer.imageshack.com/img924/3701/5OqxrV.png" target="_blank" rel="noopener noreferrer">
                <img alt="Anvil Spectre in stealth mode" src="https://imagizer.imageshack.com/img924/3701/5OqxrV.png" onerror="this.onerror=null;this.src='https://placehold.co/640x426/1a1a1a/ff4c4c?text=Spectre+Image+4';" loading="lazy" width="640" height="426"/>
              </a>
            </div>
            <div class="gallery-item">
              <a href="https://imagizer.imageshack.com/img924/9325/K5BWUN.png" target="_blank" rel="noopener noreferrer">
                <img alt="Anvil Spectre close-up" src="https://imagizer.imageshack.com/img924/9325/K5BWUN.png" onerror="this.onerror=null;this.src='https://placehold.co/640x426/1a1a1a/ff4c4c?text=Spectre+Image+5';" loading="lazy" width="640" height="426"/>
              </a>
            </div>
            <div class="gallery-item">
              <a href="https://imagizer.imageshack.com/img923/3776/K0oowz.png" target="_blank" rel="noopener noreferrer">
                <img alt="Anvil Spectre with landing gear" src="https://imagizer.imageshack.com/img923/3776/K0oowz.png" onerror="this.onerror=null;this.src='https://placehold.co/640x426/1a1a1a/ff4c4c?text=Spectre+Image+6';" loading="lazy" width="640" height="426"/>
              </a>
            </div>
            <div class="gallery-item">
              <a href="https://imagizer.imageshack.com/img923/5609/8WQlWI.png" target="_blank" rel="noopener noreferrer">
                <img alt="Anvil Spectre interior view" src="https://imagizer.imageshack.com/img923/5609/8WQlWI.png" onerror="this.onerror=null;this.src='https://placehold.co/640x426/1a1a1a/ff4c4c?text=Spectre+Image+7';" loading="lazy" width="640" height="426"/>
              </a>
            </div>
            <div class="gallery-item">
              <a href="https://imagizer.imageshack.com/img924/6461/3YOXUo.png" target="_blank" rel="noopener noreferrer">
                <img alt="Anvil Spectre cockpit" src="https://imagizer.imageshack.com/img924/6461/3YOXUo.png" onerror="this.onerror=null;this.src='https://placehold.co/640x426/1a1a1a/ff4c4c?text=Spectre+Image+8';" loading="lazy" width="640" height="426"/>
              </a>
            </div>
            <div class="gallery-item">
              <a href="https://imagizer.imageshack.com/img923/1767/t0R7xS.png" target="_blank" rel="noopener noreferrer">
                <img alt="Anvil Spectre in combat" src="https://imagizer.imageshack.com/img923/1767/t0R7xS.png" onerror="this.onerror=null;this.src='https://placehold.co/640x426/1a1a1a/ff4c4c?text=Spectre+Image+9';" loading="lazy" width="640" height="426"/>
              </a>
            </div>
            <div class="gallery-item">
              <a href="https://imagizer.imageshack.com/img923/2812/IhfzVK.png" target="_blank" rel="noopener noreferrer">
                <img alt="Anvil Spectre in space" src="https://imagizer.imageshack.com/img923/2812/IhfzVK.png" onerror="this.onerror=null;this.src='https://placehold.co/640x426/1a1a1a/ff4c4c?text=Spectre+Image+10';" loading="lazy" width="640" height="426"/>
              </a>
            </div>
          </div>
        </div>

        <section class="section" id="spectre-genesis">
          <h2>The Genesis of the Shadow<a class="back-to-top" href="#spectre-top">[Back to Top]</a></h2>
          <p>The year is 2933...</p>
          <p>Recognizing the profound urgency...</p>
          <p>From late 2933 through early 2940...</p>
          <p>As prime contractor for the Spectre...</p>
          <ul><li><strong>Esperia</strong> was subcontracted...</li><li>HFW integrated an advanced version...</li><li>HFW integrated signature masking components...</li><li>The <strong>adaptive countershading</strong> system...</li></ul>
          <p>Early prototypes underwent rigorous testing...</p>
        </section>

        <section class="section" id="spectre-hfw-overview">
            <h2>Hephaestus Forge Works (HFW): Comprehensive Overview<a class="back-to-top" href="#spectre-top">[Back to Top]</a></h2>
            <p><strong>Hephaestus Forge Works (HFW)</strong> is the highly specialized...</p>
            <p>Under the directorship of its founder...</p>
            <p>HFW's main operational base, known simply as <strong>The Forge</strong>...</p>
            <p>This heavily fortified moon base serves as the central hub...</p>
            <p>HFW is renowned for its unique <strong>Talent Acquisition Doctrine</strong>...</p>
            <p>In essence, Hephaestus Forge Works represents Anvil Aerospace's...</p>
        </section>

        <section class="section" id="spectre-founding-docs">
            <h2>Founding Documents & Key Moments<a class="back-to-top" href="#spectre-top">[Back to Top]</a></h2>
            <h3 id="spectre-founding-docs-a-hephaestus-forge-works-proposal">A. Hephaestus Forge Works: A Strategic Proposal (May 21, 2933)</h3>
            <p><strong>To:</strong> The Board of Directors, Anvil Aerospace<br />...</p>
            <h4 id="spectre-founding-docs-the-imperative">I. The Imperative: Adapting to Evolving Threats</h4>
            <p>Echoing the mid-20th century...</p>
            <h4 id="spectre-founding-docs-introducing-hfw">II. Introducing: Hephaestus Forge Works</h4>
            <p>To address this critical need...</p>
            <ul><li><strong>Hephaestus:</strong>...</li><li><strong>Forge Works:</strong>...</li></ul>
            <h4 id="spectre-founding-docs-mission-and-capabilities">III. Mission and Capabilities of The Forge</h4>
            <p>Hephaestus Forge Works will operate...</p>
            <ul><li><strong>Rapid Research & Development (R&D):</strong>...</li><li><strong>Advanced Prototyping:</strong>...</li><li><strong>Threat-Specific Adaptation:</strong>...</li><li><strong>Clandestine Operations Support:</strong>...</li><li><strong>Talent Incubation:</strong>...</li></ul>
            <h4 id="spectre-founding-docs-strategic-advantage">IV. Strategic Advantage and Conclusion</h4>
            <p>The establishment of Hephaestus Forge Works...</p>
            <p>In the spirit of the Skunk and the Phantom...</p>
            <h3 id="spectre-founding-docs-b-genesis-of-the-forge">B. The Genesis of The Forge: HFW's Establishment (2933-2940)</h3>
            <p>The escalating threats from Xenothreat...</p>
            <h4 id="spectre-founding-docs-establishing-the-command">Establishing the Command: Proposal Acceptance and Leadership (Late 2933)</h4>
            <p>Dr. Thorne's foresight resonated...</p>
            <h4 id="spectre-founding-docs-assembling-the-unconventional">Assembling the Unconventional: Recruitment (Early 2934)</h4>
            <p>With the Board's full backing...</p>
            <h4 id="spectre-founding-docs-sanctuary-found">Sanctuary Found: Locating The Forge (Mid 2934)</h4>
            <p>Simultaneously, a dedicated team...</p>
            <p>After months of scouting...</p>
            <h4 id="spectre-founding-docs-forging-the-future">Forging the Future: Construction and Integration (Late 2934 - Mid 2940)</h4>
            <p>Construction of Hephaestus Forge Works commenced...</p>
            <p>Within this re-engineered celestial body...</p>
            <p>By early 2940 , the primary construction was complete...</p>
            <h4 id="spectre-founding-docs-operational-readiness-jax">Operational Readiness and Field Integration: The Rescue and Recruitment of Jax (Post-2940)</h4>
            <p>As The Forge became fully operational...</p>
            <h3 id="spectre-founding-docs-aris-thorne-address">C. Dr. Aris Thorne's Address to Hephaestus Forge Works (Early 2940)</h3>
            <blockquote><p>*(Delivered to the assembled...)*</p><p>"Look around you...</p><p>But today... <strong>The Forge</strong>.</p><p>Each of you was chosen...</p><p>We are not merely Anvil Aerospace's...</p><p>Here, within these re-engineered walls... <strong>forge</strong>.</p><p>Our work will be unseen...</p><p>This is not a war we can afford to lose... <strong>forged</strong>!"</p></blockquote>
        </section>

        <div class="section" id="spectre-specs">
            <h2>Specifications &amp; Capabilities (HFW Fleet)<a class="back-to-top" href="#spectre-top">[Back to Top]</a></h2>
            <p>Key specifications for primary HFW platforms...</p>
            <h3>General Specifications (Spectre & Revenant)</h3>
            <table><tbody>...</tbody></table>
            <p><em>Note: Detailed specifications for Eidolon...</em></p>
            <h3>Key Design Features &amp; Systems (Common HFW Principles)</h3>
            <ul><li><strong>Stealth Integration:</strong>...</li><li><strong>Power Systems:</strong>...</li><li><strong>Shield Philosophy:</strong>...</li><li><strong>'Ghost Mode' Cockpit & Total Immersion Interior:</strong>...</li><li><strong>Advanced Materials & Construction:</strong>...</li></ul>
            <h3>Core Systems Summary (Base Spectre / Spectre Revenant Example)</h3>
            <table><tbody>...</tbody></table>
        </div>

        <div class="section" id="spectre-viewer">
          <model-viewer
            id="spectreViewer"
            src="https://ArchKaine.github.io/ship-models/Spectre_Shadow.glb"
            alt="Anvil Spectre Shadow"
            camera-controls
            interaction-prompt="none"
            style="width: 100%; height: 600px; background-color: #15181d;"
            loading="lazy" 
            reveal="interaction"
          ></model-viewer>
          <div style="margin: 1rem 0; text-align: center; display: flex; justify-content: center; gap: 10px; flex-wrap: wrap;">
            <button class="model-control-btn styled-button" onclick="switchModel('shadow')">Spectre Shadow</button>
            <button class="model-control-btn styled-button" onclick="switchModel('revenant')">Spectre Revenant</button>
            <button class="model-control-btn styled-button" onclick="switchModel('eidolon_shadow')">Eidolon Shadow</button>
          </div>
          <div class="viewer-legend" style="position: relative; margin: -3rem auto 1rem auto; background: rgba(0,0,0,0.7); padding: 1rem; border-radius: 4px; color: #fff; font-size: 0.9rem; max-width: 220px; z-index: 5; text-align:left;">
            <strong>Controls:</strong>
            <ul style="margin: 0.5rem 0 0 1rem; padding: 0; list-style: disc inside;">
              <li>Rotate: Click &amp; drag</li>
              <li>Zoom: Mouse wheel / pinch or slider</li>
              <li>Pan: Right-click &amp; drag</li>
              <li>Preset Views: Buttons below</li>
              <li>Switch Models: Above</li>
            </ul>
          </div>
          <div style="margin: 1rem 0; text-align: center;">
            <button class="model-control-btn styled-button" onclick="setView('0deg 75deg 7m')">Front</button>
            <button class="model-control-btn styled-button" onclick="setView('180deg 75deg 7m')">Back</button>
            <button class="model-control-btn styled-button" onclick="setView('90deg 75deg 7m')">Left</button>
            <button class="model-control-btn styled-button" onclick="setView('-90deg 75deg 7m')">Right</button>
            <button class="model-control-btn styled-button" onclick="setView('0deg 0deg 7m')">Top</button>
            <button class="model-control-btn styled-button" onclick="setView('0deg 180deg 7m')">Bottom</button>
            <button class="model-control-btn styled-button" onclick="setView('45deg 60deg 7m')">F-L&nbsp;Top</button>
            <button class="model-control-btn styled-button" onclick="setView('-45deg 60deg 7m')">F-R&nbsp;Top</button>
            <button class="model-control-btn styled-button" onclick="setView('135deg 60deg 7m')">B-L&nbsp;Top</button>
            <button class="model-control-btn styled-button" onclick="setView('-135deg 60deg 7m')">B-R&nbsp;Top</button>
            <button class="model-control-btn styled-button" onclick="setView('45deg 120deg 7m')">F-L&nbsp;Bot</button>
            <button class="model-control-btn styled-button" onclick="setView('-45deg 120deg 7m')">F-R&nbsp;Bot</button>
            <button class="model-control-btn styled-button" onclick="setView('135deg 120deg 7m')">B-L&nbsp;Bot</button>
            <button class="model-control-btn styled-button" onclick="setView('-135deg 120deg 7m')">B-R&nbsp;Bot</button>
            <button class="model-control-btn styled-button" onclick="recenter()">Recenter</button>
          </div>
        </div>

        <div class="section" id="spectre-variants">
            <h2>HFW Ship Variants<a class="back-to-top" href="#spectre-top">[Back to Top]</a></h2>
            <p>Select a ship family to view its specialized variants...</p>
            <div class="ship-family-tabs">...</div>
            <div class="ship-family-content-wrapper active-family-content" id="content-family-spectre">...</div>
            <div class="ship-family-content-wrapper" id="content-family-eidolon" style="display: none;">...</div>
            <div class="ship-family-content-wrapper" id="content-family-phantom" style="display: none;">...</div>
            <div class="ship-family-content-wrapper" id="content-family-daemon" style="display: none;">...</div>
        </div>

        <section class="section" id="spectre-stealth-doctrine">
            <h2>Stealth Operations & Signature Management Doctrine<a class="back-to-top" href="#spectre-top">[Back to Top]</a></h2>
            <p>Mastering HFW's advanced signature reduction...</p>
            <p>Key tactics include:</p>
            <ul><li><strong>Environmental Concealment:</strong>...</li><li><strong>Low-Altitude Flight & Terrain Following:</strong>...</li><li><strong>Passive Cooling and 'Going Cold':</strong>...</li><li><strong>Utilizing Water for Concealment and Cooling:</strong>...</li><li><strong>Seeking Strategic Hiding Positions:</strong>...</li><li><strong>Layered Signature Control:</strong>...</li></ul>
            <p>While core principles apply to all HFW stealth assets...</p>
        </section>

        <section class="section" id="spectre-scenarios">
            <h2>Operational Scenarios<a class="back-to-top" href="#spectre-top">[Back to Top]</a></h2>
            <div class="scenario-narrative"><h3>Scenario 1: Xenothreat Convoy Interdiction (Pyro System)</h3>...</div>
            <div class="scenario-narrative"><h3>Scenario 2: Ground Support Under Fire</h3>...</div>
        </section>

        <section class="section" id="spectre-interior">
            <h2>Spectre Interior Layout & Systems<a class="back-to-top" href="#spectre-top">[Back to Top]</a></h2>
            <p>The Spectre's three-deck configuration...</p>
            <p>A truly unique feature enabled by the advanced Anvil-Esperia...</p>
            <p><strong>Key Interior Features Summary (Base Spectre):</strong></p>
            <ul><li>Bridge: Retractable armored shutters...</li><li>Private Quarters: Captain, Co-Pilot, Specialist.</li><li>Shared Bunks: 2 Additional Crew.</li><li>Galley & Mess: Shared common area.</li><li>Drone Maintenance Bay: With full deployment and repair capacity.</li><li>Salvage Bay: Supports RMC/CM and onboard 3D printer.</li><li>Ammunition Bay: Armored, with autoloader...</li><li>Engineering Access: All core components accessible internally.</li></ul>
            <p><em>Note: The Eidolon series, despite being fighters...</em></p>
        </section>

        <section class="section" id="spectre-talent">
            <h2>HFW Talent Acquisition Doctrine<a class="back-to-top" href="#spectre-top">[Back to Top]</a></h2>
            <p>Operating under a mandate that prioritizes results...</p>
            <p>The profound impact of HFW technology...</p>
            <p>From its inception, this doctrine led to the formation...</p>
            <p>HFW believes that true technological superiority...</p>
        </section>

        <section class="section" id="spectre-comparison">
            <h2>Ship Comparison Module<a class="back-to-top" href="#spectre-top">[Back to Top]</a></h2>
            <p>This chart compares primary HFW platforms...</p>
            <table><thead><tr><th>Ship</th><th>Length</th><th>Role</th><th>Crew</th><th>Cargo</th><th>Signature Management</th><th>Key Differentiator</th></tr></thead><tbody>...</tbody></table>
        </section>

        <section class="section" id="spectre-environment">
            <h2>Environmental Considerations (Future Implementation)<a class="back-to-top" href="#spectre-top">[Back to Top]</a></h2>
            <p><strong>Cooling Leverage:</strong> Pilots might be able to leverage...</p>
            <p><strong>Heat Management:</strong> Varying atmospheres and weather conditions...</p>
        </section>

        <section class="section" id="spectre-testimonials">
            <h2>Field Testimonials<a class="back-to-top" href="#spectre-top">[Back to Top]</a></h2>
            <blockquote>“We never saw a thing...</blockquote><p>— Jax “Whisper” Rylan, HFW Operative (formerly Ninetails)</p>
            <blockquote>“We were pinned down...</blockquote><p>– Corporal Anya Sharma, 12th Rapid Deployment Brigade (re: Spectre Shadow)</p>
            <blockquote>“We thought it was the end...</blockquote><p>– Sergeant Major Elias Vance, 7th Expeditionary Unit (re: Spectre Strike)</p>
            <blockquote>“They were laughing at us on comms...</blockquote><p>– Security Officer Jian Li, Sector Patrol Delta-7 (re: Spectre Lockdown)</p>
            <blockquote>“We were facing a heavily shielded enemy vessel...</blockquote><p>– Flight Lieutenant Commander Rylan Voss, 9th Special Operations Wing (re: Spectre Pulse)</p>
        </section>

        <section class="section" id="revenant-acquisition">
            <h2>Spectre Revenant Acquisition<a class="back-to-top" href="#spectre-top">[Back to Top]</a></h2>
            <p>The Spectre Revenant stands apart...</p>
            <h3>Lawful Acquisition (Recovery for HFW)</h3> <p><strong>Method:</strong>...</p> <p><strong>HFW Response:</strong>...</p> <p><strong>Outcome:</strong>...</p>
            <h3>Criminal Acquisition (Theft from HFW)</h3> <p><strong>Method:</strong>...</p> <p><strong>HFW Response:</strong>...</p> <p><strong>Outcome:</strong>...</p>
            <h3>Account Limitation and Trade Restrictions</h3> <p>Regardless of the method of acquisition...</p>
            <h3>The Mark of HFW</h3> <p>Crucially, if a player loses their Spectre Revenant...</p>
        </section>

        <section class="section" id="spectre-conclusion">
            <h2>Conclusion: The Forged Shield of the UEE<a class="back-to-top" href="#spectre-top">[Back to Top]</a></h2>
            <p>Hephaestus Forge Works, born from the visionary...</p>
            <p>Inspired by the pioneering spirit...</p>
            <p>The Anvil Spectre family...</p>
            <p>The directive from Imperator Kelos Costigan...</p>
            <p>As the United Empire of Earth faces...</p>
            <p>The future, as Dr. Thorne proclaimed, is <strong>forged</strong>.</p>
            <blockquote>"It wasn't just chaos; it was precise...</blockquote>
            <blockquote><p>– Marcus “Wraith” Cole, Former Ninetails...</p></blockquote>
        </section>

        <section>
          <div>
            <p align="center">
              My reflection is the following: I did this because it seemed like
              it would be a fun project, and so far it has been.
            </p>
          </div>
        </section>
      </div>

      <aside id="section-aside" class="spectre-post-aside">
        <div class="aside-scroll-wrapper">
          <div class="aside-top-logo">
            <img
              alt="Profile Logo"
              src="https://imagizer.imageshack.com/img924/8747/qCer6W.png"
              onerror="this.onerror=null;this.src='https://placehold.co/180x100/1a1a1a/ff4c4c?text=Profile+Logo';"
              loading="lazy" width="180" height="100"
            />
          </div>
          <h2>On This Section</h2>
          <ul class="aside-toc"></ul>
          <div class="aside-bio-section">
            <h2 class="aside-bio-heading">Dr. Aris D. Thorne: Visionary</h2>
            <div class="aside-bio-content">
              <p>
                <strong>Dr. Aris David Thorne</strong> (born 2910, Portland, Earth) is
                considered Anvil Aerospace's single most valuable person and
                asset, recognized as <strong>likely the smartest person alive</strong>—the
                Stephen Hawking or Albert Einstein of his era. His academic path
                defied convention, earning <strong>sixteen doctorates</strong> across diverse
                fields from aerospace engineering to cognitive psychology and
                medicine. He excelled by seeing the <strong>interconnectedness of all
                knowledge</strong>, a polymathic approach that revolutionized his studies
                at institutions like Terra's University of Rhetor and Archimedes
                Institute.
              </p>
              <p>
                Thorne's profound understanding of <strong>all forms of technology</strong>
                catapulted Anvil's ships to a tier unmatched by any other Human
                manufacturer. His leadership led to the creation of
                <strong>Hephaestus Forge Works (HFW)</strong>, his equivalent of nuclear
                technology development: a secret division dedicated to forging
                paradigm-shifting military solutions.
              </p>
              <p>
                Despite his monumental intellect, Dr. Thorne is a <strong>humble and
                dedicated leader, well-loved by his staff</strong>. He insists on <strong>full
                disclosure</strong> for all HFW personnel, ensuring they have <strong>all the
                information needed</strong> to assess mission viability. This respect
                fosters an unparalleled familial loyalty. His rescue from
                danger, for instance, wasn't a strategic necessity to protect
                classified information, but a visceral "he's family, get him back
                NOW!" imperative from his devoted teams.
              </p>
              <p>
                His influence extends even to <strong>Aegis Dynamics</strong>. Despite Aegis's
                checkered history and their usual guardedness, their respect for
                Thorne's unparalleled vision and expertise is immense. Debating
                Thorne is akin to "a three-year-old playing chess against a
                Grandmaster"; his mind <strong>runs circles around the smartest in the
                UEE, and potentially even the Xi'an, Tevarin, and Banu</strong>. This
                intellectual gravity, paired with his humility, convinced Aegis to
                share their advanced EW and sensor technology, a testament to his
                singular standing.
              </p>
            </div>
          </div>
        </div>
      </aside>
    </div>

<script>
  // Cache frequently accessed DOM elements
  const asideElement = document.getElementById("section-aside");
  const asideTocList = asideElement ? asideElement.querySelector("ul.aside-toc") : null;
  const mainContentScroller = document.querySelector(".spectre-post-container > .container");
  const spectreNavLinks = document.querySelectorAll('nav a[href^="#"]:not([href="#spectre-top"])');
  const pageSections = Array.from(document.querySelectorAll(".spectre-post-container > .container > .section"));
  const modelViewer = document.getElementById('spectreViewer');

  // Model Viewer Data
  const modelBaseURL = "https://ArchKaine.github.io/ship-models/";
  const models = {
      shadow: { src: modelBaseURL + "Spectre_Shadow.glb", alt: "Anvil Spectre Shadow" },
      revenant: { src: modelBaseURL + "Spectre_Revenant.glb", alt: "Anvil Spectre Revenant" },
      eidolon_shadow: { src: modelBaseURL + "Eidolon_Shadow.glb", alt: "Anvil Eidolon Shadow" },
  };

  // 1) Build & update the “On This Section” aside
  function updateAside() {
    if (!asideElement || !asideTocList || !mainContentScroller) return;

    const svgIcon =
      '<svg viewBox="0 0 24 24" width="1em" height="1em" fill="currentColor" ' +
      'style="vertical-align:-0.1em;margin-right:0.8em;opacity:0.7;">' +
      '<path d="M10 17l5-5-5-5v10z"></path></svg>';

    const viewportHeight = window.innerHeight;
    const activationOffset = viewportHeight * 0.35; 

    let activeSection = null;
    for (let i = pageSections.length - 1; i >= 0; i--) {
      const sec = pageSections[i];
      const rect = sec.getBoundingClientRect(); 
      if (rect.top < activationOffset && rect.bottom > activationOffset * 0.2) { 
        activeSection = sec;
        break;
      }
    }
    
    if (!activeSection && pageSections.length > 0 && mainContentScroller.scrollTop < 50) {
        activeSection = pageSections[0];
    } else if (mainContentScroller.scrollTop + mainContentScroller.clientHeight >= mainContentScroller.scrollHeight - 50 && pageSections.length) {
        activeSection = pageSections[pageSections.length - 1];
    }

    asideTocList.innerHTML = ""; 

    if (!activeSection) {
      const li = document.createElement("li");
      li.style.padding = "0.5rem 1rem";
      li.style.fontSize = "0.9rem";
      li.style.color = "#777";
      li.textContent = "Scroll to a section.";
      asideTocList.appendChild(li);
      asideElement.style.display = "flex"; 
      return;
    }

    let sourceForHeadings = activeSection;
    if (activeSection.id === "spectre-variants") {
      const activeFamilyContent = activeSection.querySelector(
        ".ship-family-content-wrapper.active-family-content"
      );
      if (activeFamilyContent) {
        sourceForHeadings =
          activeFamilyContent.querySelector(".variant-content.active") ||
          activeFamilyContent;
      }
    }

    const headings = Array.from(
      sourceForHeadings.querySelectorAll("h2, h3, h4")
    );

    if (!headings.length) {
      const li = document.createElement("li");
      li.style.padding = "0.5rem 1rem";
      li.style.fontSize = "0.9rem";
      li.style.color = "#777";
      const sectionTitleElement = activeSection.querySelector('h2');
      const sectionTitle = sectionTitleElement ? Array.from(sectionTitleElement.childNodes).filter(node => node.nodeType === Node.TEXT_NODE).map(node => node.textContent.trim()).join(' ').trim() || sectionTitleElement.textContent.trim() : 'current section';
      li.textContent = `No sub-headings in ${sectionTitle}.`;
      asideTocList.appendChild(li);
      asideElement.style.display = "flex";
      return;
    }

    let anItemWasHighlighted = false;
    headings.forEach((h) => {
      if (!h.id) { 
        h.id = `${activeSection.id}-${h.tagName.toLowerCase()}-${h.textContent
          .trim()
          .toLowerCase()
          .replace(/\s+/g, "-")
          .replace(/[^\w-]+/g, "")}`.replace(/[^a-zA-Z0-9-_]/g, '');
      }
      const a = document.createElement("a");
      a.href = `#${h.id}`;
      const headingText = Array.from(h.childNodes).filter(node => node.nodeType === Node.TEXT_NODE).map(node => node.textContent.trim()).join(' ').trim() || h.textContent.trim();
      a.innerHTML = svgIcon + headingText;

      if (h.tagName.toLowerCase() === "h4") {
        a.style.paddingLeft = "1.5rem"; 
      }

      const headingRect = h.getBoundingClientRect();
      if (!anItemWasHighlighted && headingRect.top >= 0 && headingRect.top < activationOffset) {
        a.classList.add("active");
        anItemWasHighlighted = true;
      }

      a.addEventListener("click", (e) => {
        e.preventDefault();
        const targetElement = document.getElementById(h.id);
        if (targetElement && mainContentScroller) {
            const scrollerRect = mainContentScroller.getBoundingClientRect();
            const targetRect = targetElement.getBoundingClientRect();
            const scrollToPosition = targetRect.top - scrollerRect.top + mainContentScroller.scrollTop - (window.innerHeight * 0.1);
            
            mainContentScroller.scrollTo({
                top: Math.max(0, scrollToPosition), 
                behavior: "smooth",
            });
        }
        asideTocList.querySelectorAll("a").forEach((link) => link.classList.remove("active"));
        a.classList.add("active");
      });
      const li = document.createElement("li");
      li.appendChild(a);
      asideTocList.appendChild(li);
    });

    if (!anItemWasHighlighted && window.location.hash) {
        const activeLinkByHash = asideTocList.querySelector(`a[href="${window.location.hash}"]`);
        if (activeLinkByHash) {
            asideTocList.querySelectorAll("a").forEach(link => link.classList.remove("active"));
            activeLinkByHash.classList.add("active");
        }
    }
    asideElement.style.display = "flex";
  }
  window.updateAside = updateAside;

  function handleSpectreNavScroll() {
    if (!mainContentScroller) return;
    const sectionsForNav = [];
    spectreNavLinks.forEach(link => {
        const sectionId = link.getAttribute("href");
        if (sectionId && sectionId.startsWith("#")) {
            const sec = document.getElementById(sectionId.substring(1));
            if (sec) sectionsForNav.push(sec);
        }
    });

    let currentNavId = "";
    const navActivationOffset = window.innerHeight * 0.4; 

    for (let i = sectionsForNav.length - 1; i >= 0; i--) {
      const sec = sectionsForNav[i];
      const rect = sec.getBoundingClientRect();
      if (rect.top < navActivationOffset && rect.bottom > navActivationOffset * 0.2 ) { 
        currentNavId = sec.id;
        break;
      }
    }
    if (!currentNavId && sectionsForNav.length > 0 && mainContentScroller.scrollTop < 50) {
         currentNavId = sectionsForNav[0].id;
    } else if (mainContentScroller.scrollTop + mainContentScroller.clientHeight >= mainContentScroller.scrollHeight - 50 && sectionsForNav.length) {
        currentNavId = sectionsForNav[sectionsForNav.length - 1].id;
    }

    spectreNavLinks.forEach((link) => {
      link.classList.toggle(
        "nav-active",
        link.getAttribute("href") === `#${currentNavId}`
      );
    });
  }

  function showFamily(familyIdSuffix, btnEl) {
    document.querySelectorAll(".ship-family-content-wrapper").forEach(function (wrapper) {
        wrapper.style.display = "none";
        wrapper.classList.remove("active-family-content");
    });
    document.querySelectorAll(".ship-family-tabs button.family-tab").forEach(function (tab) {
        tab.classList.remove("active-family");
    });

    const contentToShow = document.getElementById("content-family-" + familyIdSuffix);
    if (contentToShow) {
        contentToShow.style.display = "block";
        contentToShow.classList.add("active-family-content");
    }
    if (btnEl) {
        btnEl.classList.add("active-family");
    }

    if (contentToShow) {
        const firstVariantButton = contentToShow.querySelector(".variant-tabs button");
        if (firstVariantButton) {
            const clickEvent = firstVariantButton.getAttribute('onclick');
            if (clickEvent) {
                const matches = clickEvent.match(/'([^']+)'/g);
                if (matches && matches.length >= 2) { 
                    const variantId = matches[0].replace(/'/g, '');
                    const familyIdFromClick = matches[1].replace(/'/g, ''); 
                     showVariantContent(variantId, firstVariantButton, familyIdFromClick);
                } else if (matches && matches.length === 1) { 
                    const variantId = matches[0].replace(/'/g, '');
                    showVariantContent(variantId, firstVariantButton, familyIdSuffix); 
                }
            }
        } else { 
             updateAside();
        }
    } else {
        updateAside(); 
    }
  }
  window.showFamily = showFamily;

  function showVariantContent(variantId, btnEl, familyId) { 
      const familyContentWrapper = document.getElementById('content-family-' + familyId);
      if (!familyContentWrapper) return;

      familyContentWrapper.querySelectorAll(".variant-content").forEach(function (content) {
          content.style.display = "none";
          content.classList.remove("active");
      });
      familyContentWrapper.querySelectorAll(".variant-tabs button").forEach(function (tab) {
          tab.classList.remove("active");
      });

      const contentToShow = document.getElementById(variantId);
      if (contentToShow) {
          contentToShow.style.display = "block";
          contentToShow.classList.add("active");
      }
      if (btnEl) {
          btnEl.classList.add("active");
      }
      updateAside(); 
  }
  window.showVariantContent = showVariantContent;

  function switchModel(modelKey) {
      if (modelViewer && models[modelKey]) {
          modelViewer.src = models[modelKey].src;
          modelViewer.alt = models[modelKey].alt;
      }
  }
  function setView(orbitString) {
      if (modelViewer) modelViewer.cameraOrbit = orbitString;
  }
  function recenter() {
      if (modelViewer) {
          modelViewer.cameraTarget = "auto auto auto";
          modelViewer.cameraOrbit = "0deg 75deg 7m"; 
      }
  }
  window.switchModel = switchModel;
  window.setView = setView;
  window.recenter = recenter;

  function initPageListeners() {
    const scrollOptions = { passive: true }; 
    if (mainContentScroller) {
        mainContentScroller.addEventListener("scroll", handleSpectreNavScroll, scrollOptions);
        mainContentScroller.addEventListener("scroll", updateAside, scrollOptions);
    } else {
        window.addEventListener("scroll", handleSpectreNavScroll, scrollOptions);
        window.addEventListener("scroll", updateAside, scrollOptions);
    }
    window.addEventListener("hashchange", updateAside); 
    window.addEventListener("resize", updateAside, scrollOptions); 

    const firstFamilyButton = document.querySelector(".ship-family-tabs button.family-tab");
    if (firstFamilyButton) {
         const clickEvent = firstFamilyButton.getAttribute('onclick');
         if (clickEvent) {
            const familyIdSuffixMatch = clickEvent.match(/'([^']+)'/);
            if (familyIdSuffixMatch && familyIdSuffixMatch[1]) {
                showFamily(familyIdSuffixMatch[1], firstFamilyButton);
            }
         }
    } else { 
        updateAside();
        handleSpectreNavScroll();
    }
  }

  if (document.readyState === "loading") {
    document.addEventListener("DOMContentLoaded", initPageListeners);
  } else {
    initPageListeners();
  }

  window.addEventListener("load", () => {
      updateAside();
      handleSpectreNavScroll(); 
  } , { passive: true });
</script>

  </body>
</html>
